code:
    build: .
    mem_limit: 32m
    links:
        - db

php:
    build: docker/php-fpm
    mem_limit: 64m
    volumes_from:
        - code
    links:
        - db

nginx:
    build: docker/nginx
    mem_limit: 16m
    volumes_from:
        - code
    links:
        - php
    ports:
        - 81:80
    environment:
        - VIRTUAL_HOST=*.queroservoluntario.com,queroservoluntario.com

db:
    image: mysql:5.7
    mem_limit: 256m
    environment:
        - MYSQL_ROOT_PASSWORD
    ports:
        - 3306:3306

loadbalancer:
    image: jwilder/nginx-proxy
    mem_limit: 16m
    volumes:
        - /var/run/docker.sock:/tmp/docker.sock
    links:
        - nginx
    ports:
        - 80:80
